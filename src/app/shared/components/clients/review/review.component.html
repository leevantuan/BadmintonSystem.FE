<section class="bg-white py-8 antialiased dark:bg-gray-900 md:py-16">
     <div class="mx-auto max-w-screen-xl px-4 2xl:px-0">
          <h2 class="text-4xl font-bold text-gray-700 mb-16">Reviews</h2>
          <div class="my-6 gap-8 sm:flex sm:items-start md:my-8">
               <div class="shrink-0 space-y-4">
                    <p class="text-2xl font-semibold leading-none text-gray-900 dark:text-white">
                         {{ averageRating }} out of 5
                    </p>
                    <button type="button"
                         class="mb-2 me-2 rounded-lg bg-blue-700 px-5 py-2.5 text-sm font-medium text-white transition-transform duration-300 hover:scale-105 hover:bg-primary-800 focus:outline-none focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">
                         Write a review
                    </button>
               </div>
               <div class="mt-6 min-w-0 flex-1 space-y-3 sm:mt-0">
                    <div *ngFor="let rating of ratings" class="flex items-center gap-2">
                         <p
                              class="w-2 shrink-0 text-start text-sm font-medium leading-none text-gray-900 dark:text-white">
                              {{ rating.stars }}</p>
                         <svg class="h-4 w-4 shrink-0 text-yellow-300" aria-hidden="true"
                              xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                              viewBox="0 0 24 24">
                              <path
                                   d="M13.849 4.22c-.684-1.626-3.014-1.626-3.698 0L8.397 8.387l-4.552.361c-1.775.14-2.495 2.331-1.142 3.477l3.468 2.937-1.06 4.392c-.413 1.713 1.472 3.067 2.992 2.149L12 19.35l3.897 2.354c1.52.918 3.405-.436 2.992-2.15l-1.06-4.39 3.468-2.938c1.353-1.146.633-3.336-1.142-3.477l-4.552-.36-1.754-4.17Z" />
                         </svg>
                         <div class="relative w-full h-2 bg-gray-200 rounded-full dark:bg-gray-700">
                              <div class="absolute h-2 bg-yellow-400 rounded-full transition-all duration-500"
                                   [style.width.%]="rating.percentage"></div>
                         </div>
                         <a href="#"
                              class="w-8 shrink-0 text-right text-sm font-medium leading-none text-primary-700 hover:underline dark:text-primary-500 sm:w-auto sm:text-left">
                              {{ rating.count }} <span class="hidden sm:inline">reviews</span>
                         </a>
                    </div>
               </div>
          </div>

          <div class="max-w-full mx-auto bg-white p-6">
               <h2 class="text-2xl font-bold mb-4">Đánh giá sản phẩm</h2>
               <div *ngFor="let review of reviews" class="border-b border-gray-300 py-4 bg-whit mb-4 w-full">
                    <div class="flex items-center mb-2">
                         <img [src]="review.avatar" alt="Avatar"
                              class="w-10 h-10 rounded-full border-2 border-yellow-400 shadow-md mr-3">
                         <div>
                              <p class="font-semibold">{{ review.username }}</p>
                              <p class="text-gray-500 text-sm">{{ review.date | date:'shortDate' }}</p>
                         </div>
                    </div>
                    <div class="flex mb-2">
                         <ng-container *ngFor="let star of [].constructor(5); let i = index">
                              <svg *ngIf="i < review.rating"
                                   class="w-5 h-5 text-yellow-400 transition-all duration-300 hover:scale-110"
                                   fill="currentColor" viewBox="0 0 20 20">
                                   <path
                                        d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.518 4.673h4.92c.969 0 1.372 1.24.588 1.81l-3.975 2.89 1.518 4.673c.3.921-.755 1.688-1.54 1.118l-3.975-2.89-3.975 2.89c-.784.57-1.839-.197-1.54-1.118l1.518-4.673-3.975-2.89c-.784-.57-.38-1.81.588-1.81h4.92l1.518-4.673z" />
                              </svg>
                              <svg *ngIf="i >= review.rating" class="w-5 h-5 text-gray-300" fill="currentColor"
                                   viewBox="0 0 20 20">
                                   <path
                                        d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.518 4.673h4.92c.969 0 1.372 1.24.588 1.81l-3.975 2.89 1.518 4.673c.3.921-.755 1.688-1.54 1.118l-3.975-2.89-3.975 2.89c-.784.57-1.839-.197-1.54-1.118l1.518-4.673-3.975-2.89c-.784-.57-.38-1.81.588-1.81h4.92l1.518-4.673z" />
                              </svg>
                         </ng-container>
                    </div>
                    <p class="text-gray-700">{{ review.comment }}</p>
                    <div class="mt-4 flex space-x-2">
                         <button
                              class="flex items-center border border-gray-300 px-2 py-1 rounded-lg transition-all duration-200 hover:bg-gray-100 active:scale-95">
                              <i class="fa-solid fa-thumbs-up text-gray-400 mr-2"></i> Like
                         </button>
                         <button
                              class="flex items-center border border-gray-300 px-2 py-1 rounded-lg transition-all duration-200 hover:bg-gray-100 active:scale-95">
                              <i class="fa-solid fa-flag text-gray-400 mr-2"></i> Report
                         </button>

                    </div>
               </div>
          </div>

          <div class="mt-6 text-center mb-6">
               <button type="button"
                    class="mb-2 me-2 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-900 hover:bg-gray-100 hover:text-primary-700 focus:z-10 focus:outline-none focus:ring-4 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white dark:focus:ring-gray-700">
                    View more reviews
               </button>
          </div>

          <div class="bg-gray-50 p-6 rounded-lg shadow-md transition-all duration-300 hover:shadow-lg">
               <h2 class="text-lg font-semibold">Add a review</h2>
               <div class="flex items-center space-x-2 my-2">
                    <div class="flex text-yellow-400">
                         <span *ngFor="let star of [1, 2, 3, 4, 5]; let i = index"
                              class="text-2xl cursor-pointer transition-all duration-200 hover:scale-110"
                              [class.text-gray-300]="i >= rating" (click)="setRating(i + 1)">
                              ★
                         </span>
                    </div>
                    <span class="font-medium">{{ rating }} out of 5</span>
               </div>
               <label class="block text-sm font-medium">Review title</label>
               <input type="text" [(ngModel)]="title"
                    class="w-full p-2 border rounded-lg mt-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200">

               <label class="block mt-4 text-sm font-medium">Review description</label>
               <textarea [(ngModel)]="description"
                    class="w-full p-2 border rounded-lg mt-1 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"></textarea>

               <div class="text-sm text-gray-500 mt-2">
                    Problems with the product or delivery? <a href="#" class="text-blue-500 hover:underline">Send a
                         report.</a>
               </div>

               <div class="mt-4">
                    <label class="text-sm font-medium">Add real photos of the product to help other customers
                         (Optional)</label>
                    <div
                         class="border border-dashed p-6 flex items-center justify-center rounded-lg mt-2 cursor-pointer hover:bg-gray-100 transition-all duration-200">
                         <span class="text-gray-500">Click to upload or drag and drop</span>
                    </div>
               </div>

               <div class="mt-4">
                    <label class="text-sm font-medium">Do you recommend this product?</label>
                    <div class="flex space-x-4 mt-2">
                         <label class="flex items-center space-x-2 cursor-pointer hover:text-blue-500">
                              <input type="radio" name="recommend" [(ngModel)]="recommend" [value]="true"
                                   class="accent-blue-500">
                              <span>Yes</span>
                         </label>
                         <label class="flex items-center space-x-2 cursor-pointer hover:text-blue-500">
                              <input type="radio" name="recommend" [(ngModel)]="recommend" [value]="false"
                                   class="accent-blue-500">
                              <span>No</span>
                         </label>
                    </div>
               </div>

               <div class="flex items-center mt-4">
                    <input type="checkbox" [(ngModel)]="agree" class="mr-2 accent-blue-500">
                    <label class="text-sm">By publishing this review you agree with the <a href="#"
                              class="text-blue-500 hover:underline">terms and conditions</a>.</label>
               </div>

               <div class="mt-4 flex space-x-2">
                    <button (click)="submitReview()"
                         class="bg-blue-600 text-white px-4 py-2 rounded-lg transition-all duration-200 hover:bg-blue-700 active:scale-95">Submit
                         review</button>
                    <button (click)="resetForm()"
                         class="border px-4 py-2 rounded-lg transition-all duration-200 hover:bg-gray-100 active:scale-95">Reset</button>
               </div>
          </div>
     </div>
</section>